
CREATE TABLE Almacen(Numero_Almacen NUMBER,
Ubicacion_Almacen VARCHAR2(40 BYTE),
CONSTRAINT PK_Numero_Almacen PRIMARY KEY (Numero_Almacen));

CREATE TABLE Vendedor(Numero_Vendedor NUMBER,
Nombre_Vendedor VARCHAR2(60 BYTE),
Area_Ventas VARCHAR2(40 BYTE),
CONSTRAINT PK_Numero_Vendedor PRIMARY KEY (Numero_Vendedor));

CREATE TABLE Cliente(Numero_Cliente NUMBER,
Numero_Almacen number, Nombre_Cliente VARCHAR2(50 BYTE),
CONSTRAINT PK_Numero_Cliente PRIMARY KEY (Numero_Cliente),
CONSTRAINT FK_Numero_Almacen FOREIGN KEY (Numero_Almacen) REFERENCES Almacen(Numero_Almacen));

CREATE TABLE Ventas(ID_Ventas NUMBER,
Numero_Cliente number, Numero_Vendedor number,
Monto_Venta Float,
CONSTRAINT PK_ID_Ventas PRIMARY KEY (ID_Ventas),
CONSTRAINT FK_Numero_Cliente FOREIGN KEY (Numero_Cliente) REFERENCES Cliente(Numero_Cliente),
CONSTRAINT FK_Numero_Vendedor FOREIGN KEY (Numero_Vendedor) REFERENCES Vendedor(Numero_Vendedor));


--------------------------------------------------------------------------------------------------------------

CREATE TABLE ALMACEN1 (NUMERO_ALMACEN INTEGER, UBICACION_ALMACEN VARCHAR2(50),
CONSTRAINT PK_NUMERO_ALMACEN PRIMARY KEY (NUMERO_ALMACEN));

CREATE TABLE VENDEDOR1 (NUMERO_VENDEDOR INTEGER,NOMBRE_VENDEDOR VARCHAR2(50),
AREA_VENTAS VARCHAR2(40),
CONSTRAINT PK_NUMERO_VENDEDOR PRIMARY KEY (NUMERO_VENDEDOR));

CREATE TABLE CLIENTE1(NUMERO_CLIENTE INTEGER, NOMBRE_CLIENTE VARCHAR2(40),
NUMERO_ALMACEN INTEGER,
CONSTRAINT PK_NUMERO_CLIENTE PRIMARY KEY (NUMERO_CLIENTE),
CONSTRAINT FK_NUMERO_ALMACEN FOREIGN KEY (NUMERO_ALMACEN) REFERENCES ALMACEN1 (NUMERO_ALMACEN));

CREATE TABLE VENTAS1 (ID_VENTAS INTEGER, NUMERO_CLIENTE INTEGER,
NUMERO_VENDEDOR INTEGER, MONTO_VENTAS FLOAT,
CONSTRAINT PK_ID_VENTAS1 PRIMARY KEY (ID_VENTAS),
CONSTRAINT FK_NUMERO_CLIENTE1 FOREIGN KEY (NUMERO_CLIENTE) REFERENCES CLIENTE1 (NUMERO_CLIENTE),
CONSTRAINT FK_NUMERO_VENDEDOR1 FOREIGN KEY (NUMERO_VENDEDOR) REFERENCES VENDEDOR1(NUMERO_VENDEDOR));

CREATE OR REPLACE PROCEDURE GUARDAR_ALMACEN (MY_NA IN INTEGER,MY_UA IN VARCHAR2)
AS
BEGIN
INSERT INTO ALMACEN1 VALUES(MY_NA,MY_UA);
END;
/

BEGIN 
GUARDAR_ALMACEN(1,'PLYMOUTH');
GUARDAR_ALMACEN(2,'SUPERIOR');
GUARDAR_ALMACEN(3,'BISMARCK');
GUARDAR_ALMACEN(4,'FARGO');
END;
/
SELECT * FROM ALMACEN1;

CREATE OR REPLACE PROCEDURE GUARDAR_VENDEDOR(MY_NUMV IN INTEGER, MY_NOMV IN VARCHAR2, MY_AV IN VARCHAR2)
AS
BEGIN
INSERT INTO VENDEDOR1 VALUES (MY_NUMV,MY_NOMV,MY_AV);
END;
/

BEGIN
GUARDAR_VENDEDOR(3462,'WATERS','WEST');
GUARDAR_VENDEDOR(3593,'DRYNE','EAST');
END;
/

SELECT * FROM VENDEDOR1;

CREATE OR REPLACE PROCEDURE GUARDAR_CLIENTE(MY_NUMC IN INTEGER,MY_NOMC IN VARCHAR2, MY_NUMA IN INTEGER)
AS
BEGIN
INSERT INTO CLIENTE1 VALUES (MY_NUMC ,MY_NOMC , MY_NUMA );
END;
/

BEGIN
GUARDAR_CLIENTE(18765,'Delta Systems',4);
GUARDAR_CLIENTE(18830,'A. Levy and Sons',3);
GUARDAR_CLIENTE(19242,'Ranier Company',3);
GUARDAR_CLIENTE(18841,'R. W. Flood Inc.',2);
GUARDAR_CLIENTE(18899,'Seward Systems',2);
GUARDAR_CLIENTE(19565,'Stodolas Inc.',1);
END;
/

SELECT * FROM CLIENTE1;

CREATE OR REPLACE PROCEDURE GUARDAR_VENTAS(MY_ID IN INTEGER,MY_NUMC IN INTEGER,MY_NUMV IN INTEGER, MY_MV IN FLOAT)
AS
BEGIN
INSERT INTO VENTAS1 VALUES(MY_ID ,MY_NUMC ,MY_NUMV , MY_MV );
END;
/

BEGIN
GUARDAR_VENTAS(1,18765,3462,13540);
GUARDAR_VENTAS(2,18830,3462,10600);
GUARDAR_VENTAS(3,19242,3462,9700);
GUARDAR_VENTAS(4,18841,3593,11560);
GUARDAR_VENTAS(5,18899,3593,2590);
GUARDAR_VENTAS(6,19565,3593,8800);
END;
/

SELECT * FROM VENTAS1;


-----------------------------------------


create sequence sec_CLIENTE 
start with 1 increment by 1 nomaxvalue;

create sequence sec_DIRECCION 
start with 1 increment by 1 nomaxvalue; 

CREATE OR REPLACE PROCEDURE GUARDAR_CLIENTE(MY_ID_CLIENTE OUT INTEGER, 
MY_NOMBRE IN VARCHAR2, MY_SUELDO_BASE IN FLOAT, MY_EMAIL IN VARCHAR2) 
AS 
BEGIN 
SELECT SEC_CLIENTE.NEXTVAL INTO MY_ID_CLIENTE FROM DUAL; 
INSERT INTO CLIENTE VALUES(MY_ID_CLIENTE,MY_NOMBRE,MY_SUELDO_BASE,MY_EMAIL);
END; 
/

CREATE OR REPLACE PROCEDURE GUARDAR_CLIENTE_DIRECCION(MY_ID_CLIENTE OUT INTEGER,
MY_ID_DIRECCION OUT INTEGER, MY_NOMBRE IN VARCHAR2, MY_SUELDO_BASE IN FLOAT, MY_EMAIL IN VARCHAR2, 
MY_CALLE IN VARCHAR2,MY_NUMERO_BASE IN INTEGER, MY_CP IN INTEGER, MY_MUNICIPIO IN VARCHAR2) 
AS 
BEGIN 
GUARDAR_CLIENTE(MY_ID_CLIENTE, MY_NOMBRE, MY_SUELDO_BASE,MY_EMAIL); 
SELECT SEC_DIRECCION.NEXTVAL INTO MY_ID_DIRECCION FROM DUAL; 
INSERT INTO DIRECCION VALUES(MY_ID_DIRECCION, MY_ID_CLIENTE, MY_CALLE, MY_NUMERO_BASE,MY_CP, MY_MUNICIPIO); 
END; /


CREATE SEQUENCE SEC_CLIENTE 
START WITH 5 INCREMENT BY 1 NOMAXVALUE;

CREATE SEQUENCE SEC_ALMACEN
START WITH 5 INCREMENT BY 1 NOMAXVALUE;

Select * from Almacen;

CREATE OR REPLACE PROCEDURE GUARDAR_ALMACEN1 (MY_NUMA OUT INTEGER, MY_UB in varchar2)
AS
BEGIN
SELECT SEC_ALMACEN.NEXTVAL INTO MY_NUMA FROM DUAL;
INSERT INTO ALMACEN VALUES (MY_NUMA,MY_UB);
END;
/

begin
GUARDAR_ALMACEN1('Nuevo1');
end;
/


SELECT * FROM ALMACEN;
